{"ast":null,"code":"import { createEffect, ofType } from \"@ngrx/effects\";\nimport { loginStart, loginSucess } from \"./auth.action\";\nimport { exhaustMap, map } from \"rxjs\";\nimport { setLoadingSpinner } from \"src/app/store/Shared/shared.action\";\nimport { initialState } from \"./auth.state\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@ngrx/effects\";\nimport * as i3 from \"@ngrx/store\";\nexport class AuthEffects {\n  constructor(auth, actions$, store) {\n    this.auth = auth;\n    this.actions$ = actions$;\n    this.store = store;\n    this.login$ = createEffect(() => {\n      return this.actions$.pipe(ofType(loginStart), exhaustMap(action => {\n        return this.auth.login(action.email, action.password).pipe(map(data => {\n          console.log(data);\n          const user = this.auth.formatUser(data);\n          console.log(user);\n          console.log(initialState);\n          this.store.dispatch(setLoadingSpinner({\n            status: false\n          }));\n          return loginSucess({\n            user\n          });\n        }));\n      }));\n    });\n  }\n}\nAuthEffects.ɵfac = function AuthEffects_Factory(t) {\n  return new (t || AuthEffects)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Actions), i0.ɵɵinject(i3.Store));\n};\nAuthEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthEffects,\n  factory: AuthEffects.ɵfac\n});","map":{"version":3,"names":["createEffect","ofType","loginStart","loginSucess","exhaustMap","map","setLoadingSpinner","initialState","AuthEffects","constructor","auth","actions$","store","login$","pipe","action","login","email","password","data","console","log","user","formatUser","dispatch","status","i0","ɵɵinject","i1","AuthService","i2","Actions","i3","Store","factory","ɵfac"],"sources":["C:\\AngularSampleNgrxProject\\Angular_ngrx\\src\\app\\auth\\state\\auth.effects.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { Actions, createEffect, ofType } from \"@ngrx/effects\";\r\n\r\nimport { AuthService } from \"src/app/services/auth.service\";\r\nimport { loginStart, loginSucess } from \"./auth.action\";\r\nimport { exhaustMap, map } from \"rxjs\";\r\nimport { User } from \"src/app/models/User.model\";\r\nimport { Store } from \"@ngrx/store\";\r\nimport { AppState } from \"src/app/app.state\";\r\nimport { setLoadingSpinner } from \"src/app/store/Shared/shared.action\";\r\nimport { initialState } from \"./auth.state\";\r\n\r\n@Injectable()\r\nexport class AuthEffects{\r\n    constructor(private auth:AuthService,private actions$:Actions,private store: Store<AppState>){}\r\n    login$ = createEffect(() => {\r\n        return this.actions$.pipe(\r\n          ofType(loginStart),\r\n          exhaustMap((action) => {\r\n            return this.auth.login(action.email, action.password).pipe(\r\n              map((data) => {\r\n           console.log(data);\r\n          const user= this.auth.formatUser(data)\r\n          console.log(user);\r\n         console.log(initialState);\r\n         \r\n          this.store.dispatch(setLoadingSpinner({status:false}))\r\n                return loginSucess({user});\r\n              }),\r\n\r\n            );\r\n          })\r\n        );\r\n      });\r\n    \r\n\r\n}"],"mappings":"AACA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAG7D,SAASC,UAAU,EAAEC,WAAW,QAAQ,eAAe;AACvD,SAASC,UAAU,EAAEC,GAAG,QAAQ,MAAM;AAItC,SAASC,iBAAiB,QAAQ,oCAAoC;AACtE,SAASC,YAAY,QAAQ,cAAc;;;;;AAG3C,OAAM,MAAOC,WAAW;EACpBC,YAAoBC,IAAgB,EAASC,QAAgB,EAASC,KAAsB;IAAxE,KAAAF,IAAI,GAAJA,IAAI;IAAqB,KAAAC,QAAQ,GAARA,QAAQ;IAAiB,KAAAC,KAAK,GAALA,KAAK;IAC3E,KAAAC,MAAM,GAAGb,YAAY,CAAC,MAAK;MACvB,OAAO,IAAI,CAACW,QAAQ,CAACG,IAAI,CACvBb,MAAM,CAACC,UAAU,CAAC,EAClBE,UAAU,CAAEW,MAAM,IAAI;QACpB,OAAO,IAAI,CAACL,IAAI,CAACM,KAAK,CAACD,MAAM,CAACE,KAAK,EAAEF,MAAM,CAACG,QAAQ,CAAC,CAACJ,IAAI,CACxDT,GAAG,CAAEc,IAAI,IAAI;UAChBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;UAClB,MAAMG,IAAI,GAAE,IAAI,CAACZ,IAAI,CAACa,UAAU,CAACJ,IAAI,CAAC;UACtCC,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;UAClBF,OAAO,CAACC,GAAG,CAACd,YAAY,CAAC;UAExB,IAAI,CAACK,KAAK,CAACY,QAAQ,CAAClB,iBAAiB,CAAC;YAACmB,MAAM,EAAC;UAAK,CAAC,CAAC,CAAC;UAChD,OAAOtB,WAAW,CAAC;YAACmB;UAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,CAEH;MACH,CAAC,CAAC,CACH;IACH,CAAC,CAAC;EAnB0F;;AADrFd,WAAW,C;mBAAXA,WAAW,EAAAkB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,OAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,KAAA;AAAA;AAAXzB,WAAW,C;SAAXA,WAAW;EAAA0B,OAAA,EAAX1B,WAAW,CAAA2B;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { createEffect, ofType } from \"@ngrx/effects\";\nimport { loginStart, loginSucess } from \"./auth.action\";\nimport { catchError, exhaustMap, map, of } from \"rxjs\";\nimport { setLoadingSpinner, showError } from \"src/app/store/Shared/shared.action\";\nimport { initialState } from \"./auth.state\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@ngrx/effects\";\nimport * as i3 from \"@ngrx/store\";\nexport class AuthEffects {\n  constructor(auth, actions$, store) {\n    this.auth = auth;\n    this.actions$ = actions$;\n    this.store = store;\n    this.login$ = createEffect(() => {\n      return this.actions$.pipe(ofType(loginStart), exhaustMap(action => {\n        return this.auth.login(action.email, action.password).pipe(map(data => {\n          console.log(data);\n          const user = this.auth.formatUser(data);\n          console.log(user);\n          console.log(initialState);\n          this.store.dispatch(setLoadingSpinner({\n            status: false\n          }));\n          return loginSucess({\n            user\n          });\n        }), catchError(errMsg => {\n          console.log(errMsg);\n          let errMsgs = this.auth.formatErrorMessage(errMsg.message);\n          return of(showError({\n            message: errMsgs.message\n          }));\n        }));\n      }));\n    });\n  }\n}\nAuthEffects.ɵfac = function AuthEffects_Factory(t) {\n  return new (t || AuthEffects)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.Actions), i0.ɵɵinject(i3.Store));\n};\nAuthEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthEffects,\n  factory: AuthEffects.ɵfac\n});","map":{"version":3,"names":["createEffect","ofType","loginStart","loginSucess","catchError","exhaustMap","map","of","setLoadingSpinner","showError","initialState","AuthEffects","constructor","auth","actions$","store","login$","pipe","action","login","email","password","data","console","log","user","formatUser","dispatch","status","errMsg","errMsgs","formatErrorMessage","message","i0","ɵɵinject","i1","AuthService","i2","Actions","i3","Store","factory","ɵfac"],"sources":["C:\\AngularSampleNgrxProject\\Angular_ngrx\\src\\app\\auth\\state\\auth.effects.ts"],"sourcesContent":["import { Injectable } from \"@angular/core\";\r\nimport { Actions, createEffect, ofType } from \"@ngrx/effects\";\r\n\r\nimport { AuthService } from \"src/app/services/auth.service\";\r\nimport { loginStart, loginSucess } from \"./auth.action\";\r\nimport { catchError, exhaustMap, map, of } from \"rxjs\";\r\nimport { User } from \"src/app/models/User.model\";\r\nimport { Store } from \"@ngrx/store\";\r\nimport { AppState } from \"src/app/app.state\";\r\nimport { setLoadingSpinner, showError } from \"src/app/store/Shared/shared.action\";\r\nimport { initialState } from \"./auth.state\";\r\n\r\n@Injectable()\r\nexport class AuthEffects{\r\n    constructor(private auth:AuthService,private actions$:Actions,private store: Store<AppState>){}\r\n    login$ = createEffect(() => {\r\n        return this.actions$.pipe(\r\n          ofType(loginStart),\r\n          exhaustMap((action) => {\r\n            return this.auth.login(action.email, action.password).pipe(\r\n              map((data) => {\r\n           console.log(data);\r\n          const user= this.auth.formatUser(data)\r\n          console.log(user);\r\n         console.log(initialState);\r\n         \r\n          this.store.dispatch(setLoadingSpinner({status:false}))\r\n                return loginSucess({user});\r\n              }),\r\n              catchError((errMsg)=>{\r\n                console.log(errMsg)\r\n              let  errMsgs=this.auth.formatErrorMessage(errMsg.message)\r\n             \r\n\r\n\r\n                return of( showError({message:errMsgs.message}));\r\n              })\r\n\r\n            );\r\n          })\r\n        );\r\n      });\r\n    \r\n\r\n}"],"mappings":"AACA,SAAkBA,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAG7D,SAASC,UAAU,EAAEC,WAAW,QAAQ,eAAe;AACvD,SAASC,UAAU,EAAEC,UAAU,EAAEC,GAAG,EAAEC,EAAE,QAAQ,MAAM;AAItD,SAASC,iBAAiB,EAAEC,SAAS,QAAQ,oCAAoC;AACjF,SAASC,YAAY,QAAQ,cAAc;;;;;AAG3C,OAAM,MAAOC,WAAW;EACpBC,YAAoBC,IAAgB,EAASC,QAAgB,EAASC,KAAsB;IAAxE,KAAAF,IAAI,GAAJA,IAAI;IAAqB,KAAAC,QAAQ,GAARA,QAAQ;IAAiB,KAAAC,KAAK,GAALA,KAAK;IAC3E,KAAAC,MAAM,GAAGhB,YAAY,CAAC,MAAK;MACvB,OAAO,IAAI,CAACc,QAAQ,CAACG,IAAI,CACvBhB,MAAM,CAACC,UAAU,CAAC,EAClBG,UAAU,CAAEa,MAAM,IAAI;QACpB,OAAO,IAAI,CAACL,IAAI,CAACM,KAAK,CAACD,MAAM,CAACE,KAAK,EAAEF,MAAM,CAACG,QAAQ,CAAC,CAACJ,IAAI,CACxDX,GAAG,CAAEgB,IAAI,IAAI;UAChBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;UAClB,MAAMG,IAAI,GAAE,IAAI,CAACZ,IAAI,CAACa,UAAU,CAACJ,IAAI,CAAC;UACtCC,OAAO,CAACC,GAAG,CAACC,IAAI,CAAC;UAClBF,OAAO,CAACC,GAAG,CAACd,YAAY,CAAC;UAExB,IAAI,CAACK,KAAK,CAACY,QAAQ,CAACnB,iBAAiB,CAAC;YAACoB,MAAM,EAAC;UAAK,CAAC,CAAC,CAAC;UAChD,OAAOzB,WAAW,CAAC;YAACsB;UAAI,CAAC,CAAC;QAC5B,CAAC,CAAC,EACFrB,UAAU,CAAEyB,MAAM,IAAG;UACnBN,OAAO,CAACC,GAAG,CAACK,MAAM,CAAC;UACrB,IAAKC,OAAO,GAAC,IAAI,CAACjB,IAAI,CAACkB,kBAAkB,CAACF,MAAM,CAACG,OAAO,CAAC;UAIvD,OAAOzB,EAAE,CAAEE,SAAS,CAAC;YAACuB,OAAO,EAACF,OAAO,CAACE;UAAO,CAAC,CAAC,CAAC;QAClD,CAAC,CAAC,CAEH;MACH,CAAC,CAAC,CACH;IACH,CAAC,CAAC;EA3B0F;;AADrFrB,WAAW,C;mBAAXA,WAAW,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,WAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,OAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,KAAA;AAAA;AAAX7B,WAAW,C;SAAXA,WAAW;EAAA8B,OAAA,EAAX9B,WAAW,CAAA+B;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}